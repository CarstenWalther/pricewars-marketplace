{"swagger":"2.0","info":{"title":"Price Wars - Marketplace API","description":"API for the marketplace","version":"1.0.0"},"host":"api.mp_pricewars.com","schemes":["https"],"basePath":"/api","produces":["application/json"],"paths":{"/offers":{"get":{"summary":"All offers for products on the marketplace","parameters":[{"name":"product","in":"query","description":"filter for products","type":"string"}],"responses":{"200":{"description":"An array of offers","schema":{"type":"array","items":{"$ref":"#/definitions/Offer"}}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}},"post":{"summary":"as a merchant, add a new offer","parameters":[{"name":"body","description":"offer object to be added","in":"body","required":false,"schema":{"$ref":"#/definitions/Offer"}}],"responses":{"200":{"description":"the offer ID of the newly created offer","schema":{"type":"integer"}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}}},"/offers/{id}":{"parameters":[{"name":"id","description":"offer id for the offer to fetch","in":"path","required":true,"type":"integer"}],"get":{"summary":"returns a specific offer for a product on the marketplace","responses":{"200":{"description":"An offer","schema":{"$ref":"#/definitions/Offer"}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}},"put":{"summary":"as a merchant, update an offer","parameters":[{"name":"body","description":"object attributes to be updated","in":"body","required":false,"schema":{"$ref":"#/definitions/Offer"}}],"consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"offer updated"},"405":{"description":"Invalid input"},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}},"delete":{"summary":"as a merchant, delete your offer","description":"as a merchant, delete your offer","responses":{"200":{"description":"OK"}}}},"/offers/{id}/buy":{"post":{"summary":"as a customer, I buy products","parameters":[{"name":"id","description":"offer id","in":"path","required":true,"type":"integer"},{"name":"price","description":"specifies the price for the product (to check for changes)","in":"formData","type":"number","required":true},{"name":"quantity","description":"specifies the amount of products to buy","in":"formData","type":"integer","format":"int32","required":true}],"responses":{"200":{"description":"item successfully bought"},"409":{"description":"offer changed (new version)"},"410":{"description":"out of stock"},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}}},"/merchants":{"get":{"summary":"All merchants currently registered with the marketplace","responses":{"200":{"description":"An array of registered merchants","schema":{"type":"array","items":{"$ref":"#/definitions/MerchantRegistration"}}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}},"post":{"summary":"as a merchant, register as a merchant at the marketplace","parameters":[{"name":"body","description":"api-endpoint url","in":"body","required":false,"schema":{"$ref":"#/definitions/MerchantRegistration"}}],"responses":{"200":{"description":"the merchant ID","schema":{"type":"string"}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}}},"/merchants/{id}":{"parameters":[{"name":"id","description":"the id the merchant is registered with at the marketplace","in":"path","required":true,"type":"string"}],"get":{"summary":"returns a specifi, registered merchant","responses":{"200":{"description":"a registered merchant","schema":{"$ref":"#/definitions/MerchantRegistration"}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}},"delete":{"summary":"as a merchant, I want to de-register myself from the marketplace","responses":{"200":{"description":"OK"}}}}},"definitions":{"Offer":{"type":"object","properties":{"offer_id":{"type":"integer","description":"unique identifier for an offer"},"product_id":{"type":"string","description":"the product this offer is about"},"seller_id":{"type":"string","description":"the merchant selling the product for this price"},"amount":{"type":"integer","format":"int32","description":"the amount of products offered for this price"},"price":{"type":"number","description":"price of one product (item/piece)"},"shipping_time":{"type":"integer","format":"int32","description":"time until consumer receives the products"},"prime":{"type":"boolean","description":"is true, if offer is available on prime"}}},"MerchantRegistration":{"type":"object","properties":{"api_endpoint_url":{"type":"string","description":"the url to the merchant's api"},"merchant_name":{"type":"string","description":"the name of the merchant"},"algorithm_name":{"type":"string","description":"the name of the algorithm this merchant uses"}}},"Error":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"fields":{"type":"string"}}}}}